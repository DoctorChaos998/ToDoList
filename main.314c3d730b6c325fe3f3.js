(()=>{const e=document.getElementById("form"),t=document.getElementById("input"),n=document.getElementById("toDoList"),l=document.getElementById("toggleAllToDo"),i=document.getElementById("helper"),o=document.getElementById("count"),c=document.getElementById("clearCompleted"),s=document.getElementById("selectAll"),a=document.getElementById("selectComplete"),d=document.getElementById("selectActive");let r=[],m=0,u="all";function p({id:e,title:t,isComplete:l}){const i=document.createElement("li");i.className="toDoContainer",i.id=e;const o=document.createElement("button");o.innerHTML=`<span class="material-symbols-outlined">${l?"radio_button_checked":"radio_button_unchecked"}</span>`,o.className="toDoCompleteButton";const c=document.createElement("button");c.innerHTML='<span class="material-symbols-outlined">clear</span>',c.className="toDoDeleteButton";const s=document.createElement("span");s.innerText=t,s.className="toDo",l&&s.classList.add("completeToDo"),o.addEventListener("click",(()=>v(e))),c.addEventListener("click",(()=>f(e))),s.addEventListener("dblclick",(()=>function(e){const t=document.createElement("input");t.classList.add("renameToDoInput"),t.value=r.find((t=>t.id===e)).title;const n=document.getElementById(e);t.addEventListener("click",(e=>e.stopPropagation()));const l=e=>{e.target!==t&&(e.stopPropagation(),i())},i=()=>{t.value.trim()?(n.children[2].innerText=t.value,r.find((t=>t.id===e)).title=t.value):f(e),t.remove(),n.children[1].classList.remove("noneToDo"),document.removeEventListener("click",l,!0)};t.addEventListener("keydown",(l=>{"Enter"!==l.key&&"Escape"!==l.key||(t.value.trim()?(n.children[2].innerText=t.value,r.find((t=>t.id===e)).title=t.value,i()):f(e))})),n.children[1].classList.add("noneToDo"),n.children[1].insertAdjacentElement("beforebegin",t),document.addEventListener("click",l,!0),t.focus()}(e))),i.appendChild(o),i.appendChild(s),i.appendChild(c),n.appendChild(i)}function v(e){const t=r.find((t=>t.id===e)),n=document.getElementById(e);n&&("all"!==u?n.remove():t.isComplete?(n.children[0].innerHTML='<span class="material-symbols-outlined">radio_button_unchecked</span>',n.children[1].classList.remove("completeToDo")):(n.children[0].innerHTML='<span class="material-symbols-outlined">radio_button_checked</span>',n.children[1].classList.add("completeToDo"))),t.isComplete=!t.isComplete,B(),L()}function h(e){if(u!==e){switch(e){case"all":"active"===u?d.classList.remove("helperButtonActive"):a.classList.remove("helperButtonActive"),s.classList.add("helperButtonActive"),E(r);break;case"completed":"active"===u?d.classList.remove("helperButtonActive"):s.classList.remove("helperButtonActive"),a.classList.add("helperButtonActive"),E(r.filter((e=>!0===e.isComplete)));break;case"active":"all"===u?s.classList.remove("helperButtonActive"):a.classList.remove("helperButtonActive"),d.classList.add("helperButtonActive"),E(r.filter((e=>!1===e.isComplete)))}u=e}}function E(e){n.innerHTML="",e.forEach((e=>p(e)))}function f(e){r=r.filter((t=>t.id!==e));const t=document.getElementById(e);t&&t.remove(),C(),B(),L()}function L(){c.className=r.find((e=>!0===e.isComplete))?"helperClearButton helperClearButtonActive":"helperClearButton"}function C(){i.className=r.length>0?"toDoHelperContainer toDoHelperContainerActive":"toDoHelperContainer"}function B(){o.innerText=String(r.reduce(((e,t)=>t.isComplete?e:++e),0))}c.addEventListener("click",(function(){r.forEach((e=>{!0===e.isComplete&&f(e.id)})),L(),C()})),e.addEventListener("submit",(function(e){if(e.preventDefault(),!t.value.trim())return;const n=t.value.trim(),l=m++;r.push({id:l,title:n,isComplete:!1}),t.value="","completed"!==u&&p({id:l,title:n,isComplete:!1}),C(),B()})),l.addEventListener("click",(function(){const e=r.filter((e=>!e.isComplete));if(e.length)switch(u){case"all":e.forEach((e=>{v(e.id)}));break;case"completed":e.forEach((e=>{e.isComplete=!0})),E(r);break;case"active":e.forEach((e=>{e.isComplete=!0})),n.innerHTML=""}else switch(u){case"all":r.forEach((e=>{v(e.id)}));break;case"completed":r.forEach((e=>{e.isComplete=!1})),n.innerHTML="";break;case"active":r.forEach((e=>{e.isComplete=!1})),E(r)}B(),L()})),s.addEventListener("click",(()=>h("all"))),d.addEventListener("click",(()=>h("active"))),a.addEventListener("click",(()=>h("completed")))})();